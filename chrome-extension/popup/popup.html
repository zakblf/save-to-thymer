<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Save to Thymer</title>
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <div class="popup-container">
    <header class="popup-header">
      <div class="header-title">
        <svg class="header-icon" viewBox="0 0 256 256" fill="currentColor">
          <path
            d="M184,28H72A20,20,0,0,0,52,48V224a12,12,0,0,0,18.36,10.18l57.63-36,57.65,36A12,12,0,0,0,204,224V48A20,20,0,0,0,184,28Zm-4,174.35-45.65-28.53a12,12,0,0,0-12.72,0L76,202.35V52H180Z" />
        </svg>
        <h1>Save to Thymer</h1>
      </div>
      <div class="header-actions">
        <button id="reconnect-btn" class="icon-btn" title="Reconnect">
          <svg viewBox="0 0 256 256" fill="currentColor">
            <path
              d="M228,48V96a12,12,0,0,1-12,12H168a12,12,0,0,1,0-24h19l-7.8-7.8a75.55,75.55,0,0,0-53.32-22.26h-.43A75.49,75.49,0,0,0,72.39,75.57,12,12,0,1,1,55.61,58.41a99.38,99.38,0,0,1,69.87-28.47H126A99.42,99.42,0,0,1,196.2,59.23L204,67V48a12,12,0,0,1,24,0ZM183.61,180.43a75.49,75.49,0,0,1-53.09,21.63h-.43A75.55,75.55,0,0,1,76.77,179.8L69,172H88a12,12,0,0,0,0-24H40a12,12,0,0,0-12,12v48a12,12,0,0,0,24,0V189l7.8,7.8A99.42,99.42,0,0,0,130,226.06h.56a99.38,99.38,0,0,0,69.87-28.47,12,12,0,0,0-16.78-17.16Z" />
          </svg>
        </button>
        <button id="settings-btn" class="icon-btn" title="Settings">
          <svg viewBox="0 0 256 256" fill="currentColor">
            <path
              d="M128,76a52,52,0,1,0,52,52A52.06,52.06,0,0,0,128,76Zm0,80a28,28,0,1,1,28-28A28,28,0,0,1,128,156Zm113.86-49.57A12,12,0,0,0,236,98.34L208.21,82.49l-.11-31.31a12,12,0,0,0-4.25-9.12,116,116,0,0,0-38-21.41,12,12,0,0,0-9.68.89L128,37.27,99.83,21.53a12,12,0,0,0-9.7-.9,116.06,116.06,0,0,0-38,21.47,12,12,0,0,0-4.24,9.1l-.14,31.34L20,98.35a12,12,0,0,0-5.85,8.11,110.7,110.7,0,0,0,0,43.11A12,12,0,0,0,20,157.66l27.82,15.85.11,31.31a12,12,0,0,0,4.25,9.12,116,116,0,0,0,38,21.41,12,12,0,0,0,9.68-.89L128,218.73l28.14,15.74a12,12,0,0,0,9.7.9,116.06,116.06,0,0,0,38-21.47,12,12,0,0,0,4.24-9.1l.14-31.34,27.81-15.81a12,12,0,0,0,5.85-8.11A110.7,110.7,0,0,0,241.86,106.43Zm-22.63,33.18-26.88,15.28a11.94,11.94,0,0,0-4.55,4.59c-.54,1-1.11,1.93-1.7,2.88a12,12,0,0,0-1.83,6.31L184.13,199a91.83,91.83,0,0,1-21.07,11.87l-27.15-15.19a12,12,0,0,0-5.86-1.53h-.29c-1.14,0-2.3,0-3.44,0a12.08,12.08,0,0,0-6.14,1.51L93,210.82A92.27,92.27,0,0,1,71.88,199l-.11-30.24a12,12,0,0,0-1.83-6.32c-.58-.94-1.16-1.91-1.7-2.88A11.92,11.92,0,0,0,63.7,155L36.8,139.63a86.53,86.53,0,0,1,0-23.24l26.88-15.28a12,12,0,0,0,4.55-4.58c.54-1,1.11-1.94,1.7-2.89a12,12,0,0,0,1.83-6.31L71.87,57A91.83,91.83,0,0,1,92.94,45.17l27.15,15.19a11.92,11.92,0,0,0,6.15,1.52c1.14,0,2.3,0,3.44,0a12.08,12.08,0,0,0,6.14-1.51L163,45.18A92.27,92.27,0,0,1,184.12,57l.11,30.24a12,12,0,0,0,1.83,6.32c.58.94,1.16,1.91,1.7,2.88A11.92,11.92,0,0,0,192.3,101l26.9,15.33A86.53,86.53,0,0,1,219.23,139.61Z" />
          </svg>
        </button>
        <button id="close-btn" class="icon-btn" title="Close">
          <svg viewBox="0 0 256 256" fill="currentColor">
            <path
              d="M208.49,191.51a12,12,0,0,1-17,17L128,145,64.49,208.49a12,12,0,0,1-17-17L111,128,47.51,64.49a12,12,0,0,1,17-17L128,111l63.51-63.52a12,12,0,0,1,17,17L145,128Z" />
          </svg>
        </button>
      </div>
    </header>

    <div id="connection-status" class="status-bar">
      <span class="status-dot"></span>
      <span class="status-text">Connecting...</span>
    </div>

    <div id="template-selector" class="view active">
      <div id="templates-list" class="templates-list"></div>
      <button id="add-template-btn" class="add-template-btn">
        <svg viewBox="0 0 256 256" fill="currentColor">
          <path
            d="M228,128a12,12,0,0,1-12,12H140v76a12,12,0,0,1-24,0V140H40a12,12,0,0,1,0-24h76V40a12,12,0,0,1,24,0v76h76A12,12,0,0,1,228,128Z" />
        </svg>
        New Template
      </button>
    </div>

    <div id="save-view" class="view">
      <div class="save-header">
        <button id="back-btn" class="back-btn">
          <svg viewBox="0 0 256 256" fill="currentColor">
            <path d="M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z" />
          </svg>
        </button>
        <h2 id="template-name">Template</h2>
        <button id="edit-template-btn" class="icon-btn" title="Edit">
          <svg viewBox="0 0 256 256" fill="currentColor">
            <path
              d="M232.49,55.51l-32-32a12,12,0,0,0-17,0l-96,96A12,12,0,0,0,84,128v32a12,12,0,0,0,12,12h32a12,12,0,0,0,8.49-3.51l96-96A12,12,0,0,0,232.49,55.51ZM192,49l15,15L196,75,181,60Zm-69,99H108V133l56-56,15,15Zm105-7.43V208a20,20,0,0,1-20,20H48a20,20,0,0,1-20-20V48A20,20,0,0,1,48,28h67.43a12,12,0,0,1,0,24H52V204H204V140.57a12,12,0,0,1,24,0Z" />
          </svg>
        </button>
      </div>
      <div class="field-group">
        <label class="field-label">Title</label>
        <input type="text" id="preview-title" class="field-input" placeholder="Page title">
      </div>
      <div id="property-fields" class="property-fields"></div>
      <button id="save-btn" class="save-btn">
        Save
      </button>
      <input type="hidden" id="preview-url">
    </div>

    <div id="template-editor" class="view">
      <div class="editor-header">
        <button id="editor-back-btn" class="back-btn">
          <svg viewBox="0 0 256 256" fill="currentColor">
            <path d="M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z" />
          </svg>
        </button>
        <h2 id="editor-title">New Template</h2>
      </div>
      <div class="editor-content">
        <div class="field-group">
          <label class="field-label">Template Name</label>
          <input type="text" id="editor-template-name" class="field-input" placeholder="e.g., Wishlist">
        </div>
        <div class="field-group">
          <label class="field-label">Collection</label>
          <select id="editor-collection" class="field-select">
            <option value="">Select...</option>
          </select>
        </div>
        <div class="field-mappings">
          <label class="field-label">Mappings</label>
          <div id="mappings-list" class="mappings-list"></div>
          <div class="mapping-row body-mapping">
            <div class="mapping-field-info">
              <span class="mapping-field-name">Body</span>
              <span class="mapping-field-type">Content</span>
            </div>
            <span class="mapping-arrow">â†’</span>
            <div class="mapping-config">
              <select id="editor-body-source" class="mapping-source">
                <option value="">Don't clip</option>
                <option value="page-content">Page Content</option>
              </select>
            </div>
          </div>
        </div>
        <div class="editor-actions">
          <button id="delete-template-btn" class="delete-btn">
            Delete
          </button>
          <button id="save-template-btn" class="primary-btn">
            Save
          </button>
        </div>
      </div>
    </div>

    <div id="settings-view" class="view">
      <div class="settings-header">
        <button id="settings-back-btn" class="back-btn">
          <svg viewBox="0 0 256 256" fill="currentColor">
            <path d="M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z" />
          </svg>
        </button>
        <h2>Settings</h2>
      </div>
      <div class="settings-content">
        <div class="settings-section">
          <label class="field-label">Templates</label>
          <div class="settings-actions">
            <button id="export-btn" class="settings-btn">
              <svg viewBox="0 0 256 256" fill="currentColor">
                <path
                  d="M220,112v96a20,20,0,0,1-20,20H56a20,20,0,0,1-20-20V112A20,20,0,0,1,56,92H76a12,12,0,0,1,0,24H60v88H196V116H180a12,12,0,0,1,0-24h20A20,20,0,0,1,220,112ZM96.49,72.49,116,53v83a12,12,0,0,0,24,0V53l19.51,19.52a12,12,0,1,0,17-17l-40-40a12,12,0,0,0-17,0l-40,40a12,12,0,1,0,17,17Z" />
              </svg>
              Export
            </button>
            <button id="import-btn" class="settings-btn">
              <svg viewBox="0 0 256 256" fill="currentColor">
                <path
                  d="M228,144v64a12,12,0,0,1-12,12H40a12,12,0,0,1-12-12V144a12,12,0,0,1,24,0v52H204V144a12,12,0,0,1,24,0Zm-108.49,8.49a12,12,0,0,0,17,0l40-40a12,12,0,0,0-17-17L140,115V32a12,12,0,0,0-24,0v83L96.49,95.51a12,12,0,0,0-17,17Z" />
              </svg>
              Import
            </button>
          </div>
          <input type="file" id="import-file" accept=".json" style="display:none">
        </div>
      </div>
    </div>
  </div>
  <script src="popup.js"></script>
</body>

</html>